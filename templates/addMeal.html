<!DOCTYPE html>
<html>
    <head>
        <title>Workout App</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    </head>
    <body>
        <header>
          <h1 class="heading">Workout App</h1>
          <nav>
            <a href="{{ url_for('home') }}">Home</a>
            <a href="{{ url_for('workouts') }}">Workouts</a>
            <a href="{{ url_for('diets') }}">Diet</a>
            <a href="{{ url_for('settings') }}">Settings</a>
          </nav>
        </header>

        <h1>Add a new meal</h1>

        <form id="submitForm" method="POST" action="{{ url_for('create_post' , dbType = 'Diet') }}" class = "inputArea">
          <label for="meal">Meal Description:</label>
          <input type="text" id="Workout" name="meal_name"><br>
          <label for="time">Time:</label>
          <input type="text" id="time" name="time" placeholder="(Leave blank if current time)"><br>
          <label for="Calorie">Calories:</label>
          <input type="number" id="Calorie" name="calories" min="0"><br>
          <label for="Protein">Protein:</label>
          <input type="number" id="Protein" name="protein" min="0"><br>
          <label for="Carbs">Carbohydrates:</label>
          <input type="number" id="Carbs" name="carbohydrates" min="0"><br>
          <label for="Fat">Fat:</label>
          <input type="number" id="Fat" name="fat" min="0"><br>

          <input type="submit" value="Submit">
        </form>
        
        <script>
          document.getElementById("submitForm").addEventListener("submit", function(event) {
            let dateInput = document.getElementById("time").value;
            
            let pattern = /^\d{4}-\d{2}-\d{2}$/;

            if ((!pattern.test(dateInput)) && dateInput != ""){
              alert("Invalid date format! Please enter in YYYY-MM-DD format."); 
              event.preventDefault(); 
            }
            else if (dateInput != ""){
              let dateObject = new Date(dateInput);
              let [year, month, day] = dateInput.split("-").map(Number);

              if ((dateObject.getFullYear() != year) || (dateObject.getMonth() + 1 != month) || (dateObject.getDate() != day)){
                alert("Invalid date format! Please enter in YYYY-MM-DD format."); 
                event.preventDefault(); 
              }
            }
          }); 

        </script>
        <footer>

        </footer>
        </body>
    </html>