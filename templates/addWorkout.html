<!DOCTYPE html>
<html>
    <head>
        <title>Workout App</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    </head>
    <body>
        <header>
          <h1 class="heading">Workout App</h1>
          <nav>
            <a href="{{ url_for('home') }}">Home</a>
            <a href="{{ url_for('workouts') }}">Workouts</a>
            <a href="{{ url_for('diets') }}">Diet</a>
            <a href="{{ url_for('settings') }}">Settings</a>
          </nav>
        </header>

        <h1>Add a new workout</h1>

        <form id="submitForm" method="POST" action="{{ url_for('create_post' , dbType = 'Workouts') }}" class = "inputArea">
          <label for="Workout">Workout Description:</label><br>
          <input type="text" id="Workout" name="Workout"><br>
          <label for="time">Time:</label>
          <input type="text" id="time" name="time" placeholder="(Leave blank if current time)"><br>
          <label for="WorkoutType">Workout Type:</label><br>
          <select id="WorkoutType" name="WorkoutType">
            <option value=""></option>
            <option value="Legs">Legs</option>
            <option value="Arms">Arms</option>
            <option value="Push">Push</option>
            <option value="Pull">Pull</option>
            <option value="Back">Back</option>
          </select>
          <br>
          <br>
          <br>
          <input type="submit" value="Submit">
        </form>
        
        <script>
          document.getElementById("submitForm").addEventListener("submit", function(event) {
            let dateInput = document.getElementById("time").value;
            
            let pattern = /^\d{4}-\d{2}-\d{2}$/;

            if ((!pattern.test(dateInput)) && dateInput != ""){
              alert("Invalid date format! Please enter in YYYY-MM-DD format."); 
              event.preventDefault(); 
            }
            else if (dateInput != ""){
              let dateObject = new Date(dateInput);
              let [year, month, day] = dateInput.split("-").map(Number);

              if ((dateObject.getFullYear() != year) || (dateObject.getMonth() + 1 != month) || (dateObject.getDate() != day)){
                alert("Invalid date format! Please enter in YYYY-MM-DD format."); 
                event.preventDefault(); 
              }
            }


            if (document.getElementById("WorkoutType").value == ""){
                alert("Please select a type!"); 
                event.preventDefault(); 
            }
          }); 

        </script>
        <footer>

        </footer>
        </body>
    </html>